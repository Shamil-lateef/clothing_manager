{% extends 'base.html' %}

{% block content %}
<div class="container">
  <h3 class="mb-4">Sell Product</h3>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form method="POST">
    <div class="mb-3">
      <label for="productSelect" class="form-label">Select Product</label>
      <select name="product_id" id="productSelect" class="form-select" onchange="updateSizes(this)" required>
        <option value="" disabled selected>-- Choose a product --</option>
        {% for product in products %}
          <option 
            value="{{ product.id }}" 
            data-sizes="{{ product.sizes | map(attribute='size') | join(',') }}"
            data-image="{{ product.image_url }}"
            data-style="{{ product.style_url }}"
          >
            #{{ product.id }} - {% if product.image_url %}<img src="{{ product.image_url }}" class="dropdown-img me-2">{% endif %}
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- ... rest of the form ... -->
  </form>
</div>

<style>
  .dropdown-img {
    width: 30px;
    height: 30px;
    object-fit: cover;
    border-radius: 4px;
    vertical-align: middle;
  }
</style>

<script>
  // ... existing JavaScript code ...
</script>
{% endblock %}